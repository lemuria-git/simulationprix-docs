{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"SimulationPrix \u2013 Documentation officielle","text":"<p>Bienvenue dans la documentation compl\u00e8te du projet SimulationPrix.</p> <p>Ce site rassemble :</p> <ul> <li>une pr\u00e9sentation g\u00e9n\u00e9rale du syst\u00e8me,</li> <li>la cha\u00eene fonctionnelle du calcul tarifaire,</li> <li>la structure de la base de donn\u00e9es (r\u00e9f\u00e9rentiels, configuration, simulation, exposition BI),</li> <li>une explication d\u00e9taill\u00e9e du moteur de calcul,</li> <li>le parcours utilisateur dans Power Apps,</li> <li>la restitution analytique dans Power BI,</li> <li>les bonnes pratiques de mod\u00e9lisation et d\u2019usage,</li> <li>des annexes incluant des exemples SQL, PowerApps et des sch\u00e9mas simplifi\u00e9s.</li> </ul>"},{"location":"#objectifs-de-la-documentation","title":"\ud83c\udfaf Objectifs de la documentation","text":"<p>Cette documentation est con\u00e7ue pour aider :</p> <ul> <li>les responsables m\u00e9tier,</li> <li>les analystes pricing,</li> <li>les \u00e9quipes data/BI,</li> <li>les d\u00e9veloppeurs SQL / Power Apps,</li> <li>les contributeurs au mod\u00e8le SimulationPrix.</li> </ul> <p>Elle vise \u00e0 fournir une compr\u00e9hension p\u00e9dagogique, structur\u00e9e et compl\u00e8te du fonctionnement du syst\u00e8me.</p>"},{"location":"#structure-du-site","title":"\ud83d\udd0d Structure du site","text":"<p>La documentation est organis\u00e9e en sections :</p> <ul> <li>Introduction : contexte et objectifs du projet  </li> <li>Architecture g\u00e9n\u00e9rale : vision globale des couches  </li> <li>R\u00e9f\u00e9rentiels (<code>ref.*</code>) </li> <li>Configuration (<code>cfg.*</code>) </li> <li>Simulation (<code>simu.*</code>) </li> <li>Moteur de calcul </li> <li>Power Apps </li> <li>Power BI </li> <li>Flux global </li> <li>Bonnes pratiques </li> <li>Annexes</li> </ul> <p>Utilise le menu \u00e0 gauche pour te d\u00e9placer dans les chapitres.</p>"},{"location":"#feedback-contribution","title":"\ud83d\udcec Feedback / Contribution","text":"<p>Ce site est maintenu dans le d\u00e9p\u00f4t :</p>"},{"location":"annexes/","title":"Annexes","text":""},{"location":"annexes/#exemple-sql","title":"Exemple SQL","text":"<p>```sql SELECT * FROM simu.ResultatPrix WHERE SimulationId = 202511;</p> <p>Exemple Power Apps</p> <p>Set(   _res,   SimulationPrix_8.simuspGetDefaultPrixForfait({     ExerciceId: 1,     GroupePoolId: 2,     PeriodeId: 1   }) ); ClearCollect(colPrix, _res.ResultSets.Table1);</p> <p>Glossaire</p> <p>Simulation : Ex\u00e9cution compl\u00e8te d\u2019un calcul tarifaire.</p> <p>VersionRegles : Snapshot de bar\u00e8mes.</p> <p>Fen\u00eatre d\u2019achat : Segment temporel conditionnant la vente.</p>"},{"location":"architecture/","title":"Architecture g\u00e9n\u00e9rale","text":"<p>Le syst\u00e8me repose sur quatre couches principales :</p> <p>[ref.] \u2192 [cfg.] \u2192 [simu.Input] \u2192 [simu._TmpResultat] \u2192 [simu.ResultatPrix] \u2192 [pbi.]</p>"},{"location":"architecture/#role-de-chaque-couche","title":"R\u00f4le de chaque couche","text":"Couche Sch\u00e9ma Description R\u00e9f\u00e9rentiels <code>ref</code> Dictionnaires m\u00e9tiers stables Configuration <code>cfg</code> Bar\u00e8mes versionn\u00e9s Simulation <code>simu</code> Inputs, r\u00e9sultats interm\u00e9diaires, r\u00e9sultats finals Exposition BI <code>pbi</code> Vues optimis\u00e9es pour Power BI <p>Chaque couche est d\u00e9taill\u00e9e dans les sections suivantes.</p>"},{"location":"bonnes-pratiques/","title":"Bonnes pratiques","text":"<ul> <li>Toujours choisir une VersionRegles.</li> <li>Ne jamais recalculer une simulation certifi\u00e9e.</li> <li>V\u00e9rifier couverture FenetreAchatExercice.</li> <li>Comparer les simulations uniquement dans Power BI.</li> <li>Saisir syst\u00e9matiquement les 7 dur\u00e9es + le pas.</li> <li>Garder les SimulationId comme \u00e9l\u00e9ments centraux.</li> </ul> <p>Le moteur est fiable si la gouvernance l\u2019est.</p>"},{"location":"configuration/","title":"Configuration (<code>cfg.*</code>)","text":"<p>La configuration d\u00e9finit les r\u00e8gles versionn\u00e9es.</p>"},{"location":"configuration/#cfgversionregles","title":"cfg.VersionRegles","text":"<p>Chaque version repr\u00e9sente un jeu de bar\u00e8mes fig\u00e9.</p>"},{"location":"configuration/#cfgremisecategorie","title":"cfg.RemiseCategorie","text":"<p>Remises par cat\u00e9gorie (ex : Enfant -20 %, Senior -10 %).</p>"},{"location":"configuration/#cfgremiseconditionco","title":"cfg.RemiseConditionCo","text":"<p>Remises par condition commerciale (ex : Groupe -15 %).</p>"},{"location":"configuration/#cfgfenetreachatexercice","title":"cfg.FenetreAchatExercice","text":"<p>Association dynamique entre fen\u00eatres d\u2019achat et Exercice/P\u00e9riode/P\u00e9rim\u00e8tre.</p> <p>\u00c0 retenir : La configuration est la couche \u00ab vivante \u00bb du syst\u00e8me.</p>"},{"location":"flux-global/","title":"Flux global","text":"<p>Power Apps \u2192 SQL (ref, cfg, simu) \u2192 Power BI</p>"},{"location":"flux-global/#etapes-du-flux","title":"\u00c9tapes du flux","text":"<ol> <li>Contexte r\u00e9cup\u00e9r\u00e9</li> <li>Simulation cr\u00e9\u00e9e</li> <li>Saisie enregistr\u00e9e</li> <li>Calcul SQL</li> <li>R\u00e9sultats affich\u00e9s</li> <li>Analyse Power BI</li> </ol> <p>Point important : Power Apps n\u2019effectue aucun calcul \u2192 tout est dans SQL.</p>"},{"location":"introduction/","title":"Introduction","text":"<p>La plateforme SimulationPrix est con\u00e7ue pour permettre la cr\u00e9ation, la comparaison et la compr\u00e9hension de simulations tarifaires pour des produits complexes (forfaits, billets, dur\u00e9es multiples, cat\u00e9gories clients, fen\u00eatres d\u2019achat, etc.).</p> <p>Cette documentation explique :</p> <ul> <li>la logique globale du syst\u00e8me,</li> <li>la structure des donn\u00e9es,</li> <li>le fonctionnement du calcul,</li> <li>le r\u00f4le des outils (Power Apps, SQL, Power BI),</li> <li>les bonnes pratiques pour maintenir une coh\u00e9rence globale.</li> </ul> <p>Elle est volontairement r\u00e9dig\u00e9e en fran\u00e7ais courant, accessible et p\u00e9dagogique.</p>"},{"location":"moteur-calcul/","title":"Moteur de calcul tarifaire","text":"<p>Le calcul suit :</p> <ol> <li>Lecture du contexte</li> <li>Lecture des inputs</li> <li>Lecture des r\u00e9f\u00e9rentiels</li> <li>Lecture des bar\u00e8mes versionn\u00e9s</li> <li>G\u00e9n\u00e9ration des combinaisons</li> <li>Application des remises</li> <li>Consolidation dans ResultatPrix</li> </ol>"},{"location":"moteur-calcul/#logique-metier-du-calcul","title":"Logique m\u00e9tier du calcul","text":"<p>PrixFinal = PrixBase \u00d7 (1 - RemiseCategorie - RemiseConditionCo - RemiseFenetre)</p>"},{"location":"moteur-calcul/#gestion-du-pas","title":"Gestion du \u00ab pas \u00bb","text":"<p>Permet d\u2019extrapoler les dur\u00e9es non saisies.</p>"},{"location":"moteur-calcul/#resultats","title":"R\u00e9sultats","text":"<p>Marquage <code>IsStandard</code>, gestion des extrapolations.</p>"},{"location":"powerapps/","title":"Power Apps","text":"<p>Power Apps sert \u00e0 :</p> <ul> <li>cr\u00e9er une simulation,</li> <li>saisir des prix,</li> <li>d\u00e9clencher le calcul,</li> <li>afficher les r\u00e9sultats.</li> </ul>"},{"location":"powerapps/#contexte-transmis-par-power-bi","title":"Contexte transmis par Power BI","text":"<p>PowerBIIntegration.Data inclut : ExerciceId, PeriodeId, GroupePoolId, TypeProduitId, etc.</p>"},{"location":"powerapps/#creation-dune-simulation","title":"Cr\u00e9ation d\u2019une simulation","text":"<p>INSERT dans <code>simu.Simulation</code>, avec r\u00e9cup\u00e9ration du SimulationId.</p>"},{"location":"powerapps/#saisie","title":"Saisie","text":"<p>UPSERT dans <code>simu.InputForfait</code> ou <code>simu.InputBillet</code>.</p>"},{"location":"powerapps/#calcul","title":"Calcul","text":"<p>Appel d'une proc\u00e9dure stock\u00e9e SQL.</p>"},{"location":"powerapps/#visualisation","title":"Visualisation","text":"<p>SELECT sur <code>simu.ResultatPrix</code>.</p>"},{"location":"powerbi/","title":"Power BI","text":"<p>Power BI consomme les vues :</p> <ul> <li><code>pbi.vw_ResultatPrix</code></li> <li><code>pbi.vw_Comparaison</code></li> <li><code>pbi.vw_ResultatsStandardises</code></li> </ul>"},{"location":"powerbi/#usages","title":"Usages","text":"<ul> <li>comparaison inter-simulations,</li> <li>analyse par dur\u00e9e, fen\u00eatre, cat\u00e9gorie,</li> <li>suivi de la strat\u00e9gie tarifaire,</li> <li>export et reporting.</li> </ul>"},{"location":"powerbi/#recommandation","title":"Recommandation","text":"<p>Utiliser DirectQuery pour des donn\u00e9es toujours fra\u00eeches.</p>"},{"location":"referentiels/","title":"R\u00e9f\u00e9rentiels (<code>ref.*</code>)","text":"<p>Les r\u00e9f\u00e9rentiels structurent la base. Ils repr\u00e9sentent les axes de calcul, les segments clients et les unit\u00e9s de dur\u00e9e.</p>"},{"location":"referentiels/#refdureetypeproduit","title":"ref.DureeTypeProduit","text":"<p>D\u00e9crit les dur\u00e9es standard par type de produit : 4h, 1j, 2j, 3j, 4j, 5j, 6j... jusqu'\u00e0 21j.</p>"},{"location":"referentiels/#refcategorie","title":"ref.Categorie","text":"<p>Liste les cat\u00e9gories clients : Adulte, Enfant, Senior, \u00c9tudiant\u2026</p>"},{"location":"referentiels/#refconditionco","title":"ref.ConditionCo","text":"<p>D\u00e9crit les conditions commerciales : Public, Groupe, Internet, CE\u2026</p>"},{"location":"referentiels/#reffenetreachat","title":"ref.FenetreAchat","text":"<p>D\u00e9coupage temporel : Premi\u00e8res neiges, Pleine saison, Fin de saison...</p>"},{"location":"referentiels/#refgroupepool-refpool","title":"ref.GroupePool / ref.Pool","text":"<p>D\u00e9finit les p\u00e9rim\u00e8tres commerciaux et techniques.</p> <p>Id\u00e9e cl\u00e9 : Les r\u00e9f\u00e9rentiels donnent la \u00ab g\u00e9om\u00e9trie \u00bb du mod\u00e8le.</p>"},{"location":"simulation/","title":"Simulation (<code>simu.*</code>)","text":"<p>La couche simulation stocke :</p> <ul> <li>le contexte (simu.Simulation),</li> <li>les entr\u00e9es (simu.InputForfait, simu.InputBillet),</li> <li>les r\u00e9sultats interm\u00e9diaires (simu._TmpResultat),</li> <li>les r\u00e9sultats finals (simu.ResultatPrix).</li> </ul>"},{"location":"simulation/#simusimulation","title":"simu.Simulation","text":"<p>Ent\u00eate : type produit, p\u00e9riode, exercice, version r\u00e8gles, p\u00e9rim\u00e8tre.</p>"},{"location":"simulation/#simuinputforfait","title":"simu.InputForfait","text":"<p>7 prix standards + pas.</p>"},{"location":"simulation/#simuinputbillet","title":"simu.InputBillet","text":"<p>Prix unitaires.</p>"},{"location":"simulation/#simu_tmpresultat","title":"simu._TmpResultat","text":"<p>Combinaisons g\u00e9n\u00e9r\u00e9es automatiquement.</p>"},{"location":"simulation/#simuresultatprix","title":"simu.ResultatPrix","text":"<p>R\u00e9sultats consolid\u00e9s.</p> <p>Pivot du syst\u00e8me : <code>SimulationId</code>.</p>"}]}